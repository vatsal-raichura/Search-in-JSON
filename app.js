
var data = [
    {
        "interval_ms": 10000,
        "cluster_uuid": "r62PcnPfS5aWmzXLIRTb8g",
        "source_node": {
            "transport_address": "10.1.3.33:9300",
            "ip": "10.1.3.33",
            "host": "10.1.3.33",
            "name": "node1",
            "uuid": "zsWOL6znTQu0FaEb4o_4Hg",
            "timestamp": "2023-10-25T00:00:31.336Z"
        },
        "type": "indices_stats",
        "indices_stats": {
            "_all": {
                "primaries": {
                    "search": {
                        "query_total": 9816329,
                        "query_time_in_millis": 2229061
                    },
                    "docs": {
                        "count": 488399905
                    },
                    "indexing": {
                        "throttle_time_in_millis": 0,
                        "index_time_in_millis": 6196249,
                        "index_total": 57010647,
                        "is_throttled": false
                    },
                    "store": {
                        "size_in_bytes": 82367474815
                    }
                },
                "total": {
                    "search": {
                        "query_total": 18566244,
                        "query_time_in_millis": 3614335
                    },
                    "docs": {
                        "count": 976803554
                    },
                    "indexing": {
                        "throttle_time_in_millis": 0,
                        "index_time_in_millis": 12370658,
                        "index_total": 113986373,
                        "is_throttled": false
                    },
                    "store": {
                        "size_in_bytes": 164441025765
                    }
                }
            }
        },
        "timestamp": "2023-10-25T00:00:32.337Z"
    },
    {
        "interval_ms": 10000,
        "cluster_uuid": "r62PcnPfS5aWmzXLIRTb8g",
        "source_node": {
            "transport_address": "10.1.3.33:9300",
            "ip": "10.1.3.33",
            "host": "10.1.3.33",
            "name": "node1",
            "uuid": "zsWOL6znTQu0FaEb4o_4Hg",
            "timestamp": "2023-10-25T00:00:41.336Z"
        },
        "type": "indices_stats",
        "indices_stats": {
            "_all": {
                "primaries": {
                    "search": {
                        "query_total": 9816955,
                        "query_time_in_millis": 2229139
                    },
                    "docs": {
                        "count": 488399905
                    },
                    "indexing": {
                        "throttle_time_in_millis": 0,
                        "index_time_in_millis": 6196660,
                        "index_total": 57013988,
                        "is_throttled": false
                    },
                    "store": {
                        "size_in_bytes": 82367595516
                    }
                },
                "total": {
                    "search": {
                        "query_total": 18567453,
                        "query_time_in_millis": 3614483
                    },
                    "docs": {
                        "count": 976803554
                    },
                    "indexing": {
                        "throttle_time_in_millis": 0,
                        "index_time_in_millis": 12371453,
                        "index_total": 113993055,
                        "is_throttled": false
                    },
                    "store": {
                        "size_in_bytes": 164441865238
                    }
                }
            }
        },
        "timestamp": "2023-10-25T00:00:42.330Z"
    },
    {
        "interval_ms": 10000,
        "cluster_uuid": "r62PcnPfS5aWmzXLIRTb8g",
        "source_node": {
            "transport_address": "10.1.3.33:9300",
            "ip": "10.1.3.33",
            "host": "10.1.3.33",
            "name": "node1",
            "uuid": "zsWOL6znTQu0FaEb4o_4Hg",
            "timestamp": "2023-10-25T00:00:51.336Z"
        },
        "type": "indices_stats",
        "indices_stats": {
            "_all": {
                "primaries": {
                    "search": {
                        "query_total": 9817603,
                        "query_time_in_millis": 2229216
                    },
                    "docs": {
                        "count": 488399905
                    },
                    "indexing": {
                        "throttle_time_in_millis": 0,
                        "index_time_in_millis": 6197029,
                        "index_total": 57017329,
                        "is_throttled": false
                    },
                    "store": {
                        "size_in_bytes": 82367595516
                    }
                },
                "total": {
                    "search": {
                        "query_total": 18568661,
                        "query_time_in_millis": 3614628
                    },
                    "docs": {
                        "count": 976803554
                    },
                    "indexing": {
                        "throttle_time_in_millis": 0,
                        "index_time_in_millis": 12372186,
                        "index_total": 113999737,
                        "is_throttled": false
                    },
                    "store": {
                        "size_in_bytes": 164442030111
                    }
                }
            }
        },
        "timestamp": "2023-10-25T00:00:52.328Z"
    },
    {
        "interval_ms": 10000,
        "cluster_uuid": "r62PcnPfS5aWmzXLIRTb8g",
        "source_node": {
            "transport_address": "10.1.3.33:9300",
            "ip": "10.1.3.33",
            "host": "10.1.3.33",
            "name": "node1",
            "uuid": "zsWOL6znTQu0FaEb4o_4Hg",
            "timestamp": "2023-10-25T00:01:01.336Z"
        },
        "type": "indices_stats",
        "indices_stats": {
            "_all": {
                "primaries": {
                    "search": {
                        "query_total": 9818374,
                        "query_time_in_millis": 2229405
                    },
                    "docs": {
                        "count": 488399906
                    },
                    "indexing": {
                        "throttle_time_in_millis": 0,
                        "index_time_in_millis": 6197350,
                        "index_total": 57020671,
                        "is_throttled": false
                    },
                    "store": {
                        "size_in_bytes": 82367823497
                    }
                },
                "total": {
                    "search": {
                        "query_total": 18570084,
                        "query_time_in_millis": 3614890
                    },
                    "docs": {
                        "count": 976803556
                    },
                    "indexing": {
                        "throttle_time_in_millis": 0,
                        "index_time_in_millis": 12372935,
                        "index_total": 114006421,
                        "is_throttled": false
                    },
                    "store": {
                        "size_in_bytes": 164442438635
                    }
                }
            }
        },
        "timestamp": "2023-10-25T00:01:02.335Z"
    },
    {
        "interval_ms": 10000,
        "cluster_uuid": "r62PcnPfS5aWmzXLIRTb8g",
        "source_node": {
            "transport_address": "10.1.3.33:9300",
            "ip": "10.1.3.33",
            "host": "10.1.3.33",
            "name": "node1",
            "uuid": "zsWOL6znTQu0FaEb4o_4Hg",
            "timestamp": "2023-10-25T00:01:11.337Z"
        },
        "type": "indices_stats",
        "indices_stats": {
            "_all": {
                "primaries": {
                    "search": {
                        "query_total": 9819057,
                        "query_time_in_millis": 2229701
                    },
                    "docs": {
                        "count": 488399907
                    },
                    "indexing": {
                        "throttle_time_in_millis": 0,
                        "index_time_in_millis": 6197615,
                        "index_total": 57024013,
                        "is_throttled": false
                    },
                    "store": {
                        "size_in_bytes": 82368115738
                    }
                },
                "total": {
                    "search": {
                        "query_total": 18571427,
                        "query_time_in_millis": 3615400
                    },
                    "docs": {
                        "count": 976803557
                    },
                    "indexing": {
                        "throttle_time_in_millis": 0,
                        "index_time_in_millis": 12373664,
                        "index_total": 114013105,
                        "is_throttled": false
                    },
                    "store": {
                        "size_in_bytes": 164442894041
                    }
                }
            }
        },
        "timestamp": "2023-10-25T00:01:12.368Z"
    },
    {
        "interval_ms": 10000,
        "cluster_uuid": "r62PcnPfS5aWmzXLIRTb8g",
        "source_node": {
            "transport_address": "10.1.3.33:9300",
            "ip": "10.1.3.33",
            "host": "10.1.3.33",
            "name": "node1",
            "uuid": "zsWOL6znTQu0FaEb4o_4Hg",
            "timestamp": "2023-10-25T00:01:21.337Z"
        },
        "type": "indices_stats",
        "indices_stats": {
            "_all": {
                "primaries": {
                    "search": {
                        "query_total": 9819727,
                        "query_time_in_millis": 2229916
                    },
                    "docs": {
                        "count": 488399908
                    },
                    "indexing": {
                        "throttle_time_in_millis": 0,
                        "index_time_in_millis": 6197970,
                        "index_total": 57027355,
                        "is_throttled": false
                    },
                    "store": {
                        "size_in_bytes": 82368291587
                    }
                },
                "total": {
                    "search": {
                        "query_total": 18572650,
                        "query_time_in_millis": 3615677
                    },
                    "docs": {
                        "count": 976803559
                    },
                    "indexing": {
                        "throttle_time_in_millis": 0,
                        "index_time_in_millis": 12374390,
                        "index_total": 114019789,
                        "is_throttled": false
                    },
                    "store": {
                        "size_in_bytes": 164443245739
                    }
                }
            }
        },
        "timestamp": "2023-10-25T00:01:22.317Z"
    },
    {
        "interval_ms": 10000,
        "cluster_uuid": "r62PcnPfS5aWmzXLIRTb8g",
        "source_node": {
            "transport_address": "10.1.3.33:9300",
            "ip": "10.1.3.33",
            "host": "10.1.3.33",
            "name": "node1",
            "uuid": "zsWOL6znTQu0FaEb4o_4Hg",
            "timestamp": "2023-10-25T00:01:31.337Z"
        },
        "type": "indices_stats",
        "indices_stats": {
            "_all": {
                "primaries": {
                    "search": {
                        "query_total": 9820351,
                        "query_time_in_millis": 2230000
                    },
                    "docs": {
                        "count": 488399908
                    },
                    "indexing": {
                        "throttle_time_in_millis": 0,
                        "index_time_in_millis": 6198324,
                        "index_total": 57030696,
                        "is_throttled": false
                    },
                    "store": {
                        "size_in_bytes": 82368454723
                    }
                },
                "total": {
                    "search": {
                        "query_total": 18573859,
                        "query_time_in_millis": 3615831
                    },
                    "docs": {
                        "count": 976803559
                    },
                    "indexing": {
                        "throttle_time_in_millis": 0,
                        "index_time_in_millis": 12375100,
                        "index_total": 114026471,
                        "is_throttled": false
                    },
                    "store": {
                        "size_in_bytes": 164443572011
                    }
                }
            }
        },
        "timestamp": "2023-10-25T00:01:32.322Z"
    },
    {
        "interval_ms": 10000,
        "cluster_uuid": "r62PcnPfS5aWmzXLIRTb8g",
        "source_node": {
            "transport_address": "10.1.3.33:9300",
            "ip": "10.1.3.33",
            "host": "10.1.3.33",
            "name": "node1",
            "uuid": "zsWOL6znTQu0FaEb4o_4Hg",
            "timestamp": "2023-10-25T00:01:41.338Z"
        },
        "type": "indices_stats",
        "indices_stats": {
            "_all": {
                "primaries": {
                    "search": {
                        "query_total": 9820990,
                        "query_time_in_millis": 2230083
                    },
                    "docs": {
                        "count": 488399908
                    },
                    "indexing": {
                        "throttle_time_in_millis": 0,
                        "index_time_in_millis": 6198675,
                        "index_total": 57034037,
                        "is_throttled": false
                    },
                    "store": {
                        "size_in_bytes": 82368617890
                    }
                },
                "total": {
                    "search": {
                        "query_total": 18575068,
                        "query_time_in_millis": 3615987
                    },
                    "docs": {
                        "count": 976803559
                    },
                    "indexing": {
                        "throttle_time_in_millis": 0,
                        "index_time_in_millis": 12375835,
                        "index_total": 114033153,
                        "is_throttled": false
                    },
                    "store": {
                        "size_in_bytes": 164443898345
                    }
                }
            }
        },
        "timestamp": "2023-10-25T00:01:42.344Z"
    },
    {
        "interval_ms": 10000,
        "cluster_uuid": "r62PcnPfS5aWmzXLIRTb8g",
        "source_node": {
            "transport_address": "10.1.3.33:9300",
            "ip": "10.1.3.33",
            "host": "10.1.3.33",
            "name": "node1",
            "uuid": "zsWOL6znTQu0FaEb4o_4Hg",
            "timestamp": "2023-10-25T00:01:51.338Z"
        },
        "type": "indices_stats",
        "indices_stats": {
            "_all": {
                "primaries": {
                    "search": {
                        "query_total": 9821627,
                        "query_time_in_millis": 2230160
                    },
                    "docs": {
                        "count": 488399908
                    },
                    "indexing": {
                        "throttle_time_in_millis": 0,
                        "index_time_in_millis": 6198935,
                        "index_total": 57037378,
                        "is_throttled": false
                    },
                    "store": {
                        "size_in_bytes": 82368781106
                    }
                },
                "total": {
                    "search": {
                        "query_total": 18576276,
                        "query_time_in_millis": 3616127
                    },
                    "docs": {
                        "count": 976803559
                    },
                    "indexing": {
                        "throttle_time_in_millis": 0,
                        "index_time_in_millis": 12376527,
                        "index_total": 114039835,
                        "is_throttled": false
                    },
                    "store": {
                        "size_in_bytes": 164444224777
                    }
                }
            }
        },
        "timestamp": "2023-10-25T00:01:52.325Z"
    },
    {
        "interval_ms": 10000,
        "cluster_uuid": "r62PcnPfS5aWmzXLIRTb8g",
        "source_node": {
            "transport_address": "10.1.3.33:9300",
            "ip": "10.1.3.33",
            "host": "10.1.3.33",
            "name": "node1",
            "uuid": "zsWOL6znTQu0FaEb4o_4Hg",
            "timestamp": "2023-10-25T00:02:01.338Z"
        },
        "type": "indices_stats",
        "indices_stats": {
            "_all": {
                "primaries": {
                    "search": {
                        "query_total": 9822384,
                        "query_time_in_millis": 2230355
                    },
                    "docs": {
                        "count": 488399909
                    },
                    "indexing": {
                        "throttle_time_in_millis": 0,
                        "index_time_in_millis": 6199393,
                        "index_total": 57040720,
                        "is_throttled": false
                    },
                    "store": {
                        "size_in_bytes": 82368961419
                    }
                },
                "total": {
                    "search": {
                        "query_total": 18577699,
                        "query_time_in_millis": 3616397
                    },
                    "docs": {
                        "count": 976803560
                    },
                    "indexing": {
                        "throttle_time_in_millis": 0,
                        "index_time_in_millis": 12377439,
                        "index_total": 114046519,
                        "is_throttled": false
                    },
                    "store": {
                        "size_in_bytes": 164444568236
                    }
                }
            }
        },
        "timestamp": "2023-10-25T00:02:02.334Z"
    }
]

const searchInput = document.getElementById('searchInput');
const result = document.getElementById('result');

function searchInDataRecursive(data, searchTerm) {
    const searchTermLowercase = searchTerm.toLowerCase();

    function recursiveSearch(obj) {
        const resultObject = {};

        for (const key in obj) {
            const keyLowercase = key.toLowerCase();

            if (keyLowercase.includes(searchTermLowercase)) {
                
                resultObject[key] = obj[key];
            }

            if (obj[key] && typeof obj[key] === "object") {
                const nestedResult = recursiveSearch(obj[key]);
                if (Object.keys(nestedResult).length > 0) {
                    resultObject[key] = nestedResult;
                }
            } else if (obj[key] && obj[key].toString().toLowerCase().includes(searchTermLowercase)) {
                
                resultObject[key] = obj[key];
            }
        }

        return resultObject;
    }

    const results = [];
    data.forEach(item => {
        const resultItem = recursiveSearch(item);
        if (Object.keys(resultItem).length > 0) {
            results.push(resultItem);
        }
    });

    return results;
}

searchInput.addEventListener("input", () =>{
    if(searchInput.innerText = ""){
        result.innerText = JSON.stringify(data, null, 2)
    }
    else{
        // console.log("cli");
        const searchTerm = searchInput.value ;
        const finResult = searchInDataRecursive(data, searchTerm);
        const final = JSON.stringify(finResult, null, 2);
        result.innerText = final;
    }
})
